<div id="chat-container" class="chat-container">
  <div class="chat-sidebar">
    <div class="chat-search">
      <input type="search" name="q" class="chat-search-input"
             placeholder="Search transmissions..."
             hx-get="/chat/search"
             hx-trigger="keyup changed delay:300ms"
             hx-target="#chat-messages-area"
             hx-swap="innerHTML">
    </div>
    <div id="chat-threads" class="chat-threads">
      <div class="chat-threads-header">
        <h2>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9"/>
            <path d="M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"/>
            <circle cx="12" cy="12" r="2"/>
            <path d="M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"/>
            <path d="M19.1 4.9C23 8.8 23 15.1 19.1 19"/>
          </svg>
          Channels
        </h2>
        <button class="chat-new-thread-btn"
                hx-get="/chat/thread/new"
                hx-target="#modal-container"
                hx-swap="innerHTML">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          New
        </button>
      </div>
      <div id="threads-list" class="chat-threads-list">
        {{#each threads}}
        <div id="thread-{{id}}" class="chat-thread-item{{#if isActive}} chat-thread-active{{/if}}"
             hx-get="/chat/thread/{{id}}"
             hx-target="#chat-messages-area"
             hx-swap="innerHTML"
             hx-push-url="true">
          <div class="chat-thread-header">
            <h4 class="chat-thread-title">{{title}}</h4>
            <span class="chat-thread-time">{{relativeTime}}</span>
          </div>
          {{#if hasLastMessage}}
          <p class="chat-thread-preview">{{lastMessagePreview}}</p>
          {{/if}}
          <div class="chat-thread-meta">
            <span class="chat-thread-count">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              {{messageCount}}
            </span>
          </div>
        </div>
        {{/each}}
      </div>
    </div>
  </div>
  <div id="chat-messages-area" class="chat-main">
    <div id="chat-main-content">
      {{#if hasActiveThread}}
      {{> chat/_thread-area}}
      {{else}}
      <div class="chat-empty-state">
        <svg class="chat-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9"/>
          <path d="M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5"/>
          <circle cx="12" cy="12" r="2"/>
          <path d="M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5"/>
          <path d="M19.1 4.9C23 8.8 23 15.1 19.1 19"/>
        </svg>
        <h2>Awaiting Signal</h2>
        <p>Select a channel from the sidebar or create a new one</p>
      </div>
      {{/if}}
    </div>
  </div>
</div>
<div id="modal-container"></div>
<script src="/js/chat.js"></script>
