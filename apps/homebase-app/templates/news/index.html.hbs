<div class="news-container">
  <!-- Header -->
  <div class="news-header">
    <h1>News</h1>
    <button hx-get="/news/add" hx-target="#modal-container"
            hx-swap="innerHTML" class="btn btn-primary">+ Add Link</button>
  </div>

  <!-- Filters -->
  <div class="news-filters">
    <a href="/news" class="news-filter-tab{{#if filterAll}} active{{/if}}">All</a>
    <a href="/news?filter=unread" class="news-filter-tab{{#if filterUnread}} active{{/if}}">
      Unread{{#if unreadCount}}<span class="news-filter-badge">{{unreadCount}}</span>{{/if}}
    </a>
    <a href="/news?filter=saved" class="news-filter-tab{{#if filterSaved}} active{{/if}}">
      Saved{{#if savedCount}}<span class="news-filter-badge">{{savedCount}}</span>{{/if}}
    </a>
    <a href="/news?filter=Tech" class="news-filter-tab{{#if filterTech}} active{{/if}}">Tech</a>
    <a href="/news?filter=Business" class="news-filter-tab{{#if filterBusiness}} active{{/if}}">Business</a>
    <a href="/news?filter=Science" class="news-filter-tab{{#if filterScience}} active{{/if}}">Science</a>
    <a href="/news?filter=Health" class="news-filter-tab{{#if filterHealth}} active{{/if}}">Health</a>
    <a href="/news?filter=Sports" class="news-filter-tab{{#if filterSports}} active{{/if}}">Sports</a>
    <a href="/news?filter=Entertainment" class="news-filter-tab{{#if filterEntertainment}} active{{/if}}">Entertainment</a>
    <a href="/news?filter=General" class="news-filter-tab{{#if filterGeneral}} active{{/if}}">General</a>
  </div>

  <!-- Items -->
  <div id="news-items">
    {{#if hasItems}}
    <div class="news-items-list">
      {{#each items}}
      <div id="item-{{id}}" class="news-item-row{{#if isRead}} read{{/if}}">
        <!-- Main content -->
        <div class="news-item-main">
          <div class="news-item-header">
            {{#if isSaved}}<span class="news-item-saved-indicator" title="Saved"></span>{{/if}}
            <a href="{{url}}" target="_blank" class="news-item-title"
               hx-post="/news/{{id}}/read" hx-swap="none">{{title}}</a>
          </div>
          {{#if hasDescription}}
          <p class="news-item-description">{{shortDescription}}</p>
          {{/if}}
          <div class="news-item-meta">
            <span class="news-item-source">{{displaySource}}</span>
            <span class="news-item-category">{{category}}</span>
            <span class="news-item-time">{{relativeTime}}</span>
          </div>
        </div>
        <!-- Actions -->
        <div class="news-item-actions">
          <button hx-post="/news/{{id}}/read" hx-swap="none"
                  class="btn-icon{{#unless isRead}} btn-icon-active{{/unless}}"
                  title="{{#if isRead}}Mark unread{{else}}Mark read{{/if}}">
            {{#if isRead}}
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
            </svg>
            {{else}}
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" stroke="none">
              <circle cx="12" cy="12" r="6"/>
            </svg>
            {{/if}}
          </button>
          <button hx-post="/news/{{id}}/save" hx-swap="none"
                  class="btn-icon{{#if isSaved}} btn-icon-active{{/if}}"
                  title="{{#if isSaved}}Unsave{{else}}Save{{/if}}">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="{{#if isSaved}}currentColor{{else}}none{{/if}}" stroke="currentColor" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
          </button>
          <button hx-get="/news/{{id}}/edit" hx-target="#modal-container"
                  hx-swap="innerHTML" class="btn-icon" title="Edit">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
          </button>
          <button hx-delete="/news/{{id}}" hx-swap="none"
                  hx-confirm="Delete this item?"
                  class="btn-icon btn-icon-danger" title="Delete">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>
      {{/each}}
    </div>
    {{else}}
    <div class="news-empty">
      <svg class="news-empty-svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/>
        <path d="M18 14h-8"/>
        <path d="M15 18h-5"/>
        <path d="M10 6h8v4h-8z"/>
      </svg>
      <p>No news items</p>
      <p class="text-muted">Add some links to get started!</p>
    </div>
    {{/if}}
  </div>

  <!-- Modal container -->
  <div id="modal-container"></div>

  <!-- SSE script -->
  <script src="/js/news.js"></script>
</div>

<style>
.news-empty-svg {
  display: block;
  margin: 0 auto 1.5rem;
  opacity: 0.2;
}
</style>
