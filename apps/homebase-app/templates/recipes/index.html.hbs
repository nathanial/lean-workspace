<div class="recipes-container">
  <!-- Header -->
  <div class="recipes-header">
    <h1>Recipes</h1>
    <a href="/recipes/new" class="btn btn-primary">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
      New Recipe
    </a>
  </div>

  <!-- Filters -->
  <div class="recipes-filters">
    <a href="/recipes" class="recipes-filter-tab{{#if filterAll}} active{{/if}}">All</a>
    <a href="/recipes?category=Breakfast" class="recipes-filter-tab{{#if filterBreakfast}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
      </svg>
      Breakfast
    </a>
    <a href="/recipes?category=Lunch" class="recipes-filter-tab{{#if filterLunch}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 11h18M5 11V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5"/>
        <ellipse cx="12" cy="17" rx="9" ry="4"/>
      </svg>
      Lunch
    </a>
    <a href="/recipes?category=Dinner" class="recipes-filter-tab{{#if filterDinner}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
        <path d="M7 2v20"/>
        <path d="M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
      </svg>
      Dinner
    </a>
    <a href="/recipes?category=Dessert" class="recipes-filter-tab{{#if filterDessert}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M8 2h8l2 8H6l2-8z"/>
        <path d="M6 10c0 4.4 3.6 8 6 10 2.4-2 6-5.6 6-10"/>
        <line x1="12" y1="14" x2="12" y2="16"/>
      </svg>
      Dessert
    </a>
    <a href="/recipes?category=Snack" class="recipes-filter-tab{{#if filterSnack}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 8h14M5 12h14M5 16h14"/>
        <rect x="3" y="4" width="18" height="16" rx="2"/>
      </svg>
      Snack
    </a>
    <a href="/recipes?category=Beverage" class="recipes-filter-tab{{#if filterBeverage}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 8h1a4 4 0 1 1 0 8h-1"/>
        <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8z"/>
        <line x1="6" y1="1" x2="6" y2="4"/>
        <line x1="10" y1="1" x2="10" y2="4"/>
        <line x1="14" y1="1" x2="14" y2="4"/>
      </svg>
      Beverage
    </a>
    <a href="/recipes?category=Other" class="recipes-filter-tab{{#if filterOther}} active{{/if}}">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2"/>
        <line x1="8" y1="8" x2="16" y2="8"/>
        <line x1="8" y1="12" x2="16" y2="12"/>
        <line x1="8" y1="16" x2="12" y2="16"/>
      </svg>
      Other
    </a>
  </div>

  <!-- Grid -->
  <div id="recipes-grid">
    {{#if hasRecipes}}
    <div class="recipes-grid">
      {{#each recipes}}
      <a href="/recipes/{{id}}" class="recipes-card">
        <div class="recipes-card-header">
          <span class="recipes-card-icon">
            {{#eq category "Breakfast"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
            </svg>
            {{/eq}}
            {{#eq category "Lunch"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 11h18M5 11V6a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v5"/>
              <ellipse cx="12" cy="17" rx="9" ry="4"/>
            </svg>
            {{/eq}}
            {{#eq category "Dinner"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
              <path d="M7 2v20"/>
              <path d="M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
            </svg>
            {{/eq}}
            {{#eq category "Dessert"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M8 2h8l2 8H6l2-8z"/>
              <path d="M6 10c0 4.4 3.6 8 6 10 2.4-2 6-5.6 6-10"/>
              <line x1="12" y1="14" x2="12" y2="16"/>
            </svg>
            {{/eq}}
            {{#eq category "Snack"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 8h14M5 12h14M5 16h14"/>
              <rect x="3" y="4" width="18" height="16" rx="2"/>
            </svg>
            {{/eq}}
            {{#eq category "Beverage"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 8h1a4 4 0 1 1 0 8h-1"/>
              <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8z"/>
              <line x1="6" y1="1" x2="6" y2="4"/>
              <line x1="10" y1="1" x2="10" y2="4"/>
              <line x1="14" y1="1" x2="14" y2="4"/>
            </svg>
            {{/eq}}
            {{#eq category "Other"}}
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <line x1="8" y1="8" x2="16" y2="8"/>
              <line x1="8" y1="12" x2="16" y2="12"/>
              <line x1="8" y1="16" x2="12" y2="16"/>
            </svg>
            {{/eq}}
          </span>
          <span class="recipes-card-category">{{category}}</span>
        </div>
        <h3 class="recipes-card-title">{{title}}</h3>
        {{#if hasDescription}}
        <p class="recipes-card-description">{{shortDescription}}</p>
        {{/if}}
        <div class="recipes-card-meta">
          {{#if hasTotalTime}}
          <span class="recipes-card-time">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            {{totalTimeFormatted}}
          </span>
          {{/if}}
          {{#if hasServings}}
          <span class="recipes-card-servings">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
            {{servings}}
          </span>
          {{/if}}
        </div>
      </a>
      {{/each}}
    </div>
    {{else}}
    <div class="recipes-empty">
      <div class="recipes-empty-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
          <path d="M7 2v20"/>
          <path d="M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
        </svg>
      </div>
      <p>No recipes yet</p>
      <p class="text-muted">Add your first recipe!</p>
    </div>
    {{/if}}
  </div>

  <!-- Modal container -->
  <div id="modal-container"></div>

  <!-- SSE script -->
  <script src="/js/recipes.js"></script>
</div>
