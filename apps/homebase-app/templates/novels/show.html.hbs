<div class="novel-editor">
  <!-- Sidebar: page list -->
  <aside class="novel-pages-sidebar">
    <div class="novel-title-section">
      <h2>{{title}}</h2>
      <div class="novel-actions">
        <a href="/novels/{{id}}/edit" class="btn btn-small btn-secondary">Edit</a>
        <form method="POST" action="/novels/{{id}}/delete" style="display: inline;"
              onsubmit="return confirm('Delete this novel and all its pages?')">
          <button type="submit" class="btn btn-small btn-danger">Delete</button>
        </form>
      </div>
    </div>

    <div class="page-list">
      {{#each pages}}
      <a href="/novels/{{../id}}/page/{{pageNumber}}" class="page-thumb{{#if isActive}} active{{/if}}">
        <span class="page-number">Page {{pageNumber}}</span>
        <span class="page-layout">{{layoutTemplate}}</span>
      </a>
      {{/each}}

      <form method="POST" action="/novels/{{id}}/pages" class="add-page-form">
        <select name="layout" class="page-layout-select">
          <option value="full">Full Page</option>
          <option value="two-panel">Two Panels</option>
          <option value="three-panel">Three Panels</option>
          <option value="four-grid">Four Grid</option>
          <option value="six-grid">Six Grid</option>
        </select>
        <button type="submit" class="btn btn-small btn-primary">+ Add Page</button>
      </form>
    </div>
  </aside>

  <!-- Main: current page editor -->
  <main class="page-editor">
    {{#if hasCurrentPage}}
    {{> novels/_page-editor currentPage}}
    {{else}}
    <div class="no-page-selected">
      <svg class="empty-icon-svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
        <rect x="3" y="3" width="18" height="18" rx="2"/>
        <path d="M3 9h18M9 21V9"/>
      </svg>
      <p>No pages yet.</p>
      <p class="empty-hint">Add a page to start creating your novel!</p>
    </div>
    {{/if}}
  </main>
</div>

<style>
.no-page-selected .empty-icon-svg {
  opacity: 0.15;
  margin-bottom: 1.5rem;
}
</style>

<script src="/js/novels.js"></script>
